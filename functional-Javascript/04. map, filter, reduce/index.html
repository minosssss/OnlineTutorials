
<script>
    const products = [
    { name: '반팔티',       price: 15000},
    { name: '긴팔티',       price: 20000},
    { name: '핸드폰케이스',  price: 15000},
    { name: '후드티',       price: 30000},
    { name: '청바지',       price: 45000}
    ];
</script>
# map

<script>
    const map = (f, iter) => {
        let res = [];
        for (const a of iter) {
            res.push(f(a));
        }
        return res
    }

    let names = [];
    for (const p of products){
        names.push(p.name);
    }
    console.log(names);

    console.log(map(p => p.name, products));

    let prices = [];
    for (const p of products){
        prices.push(p.price);
    }
    console.log(prices);

    console.log(map(p => p.price, products));
</script>

# 이터러블 프로토콜을 따른 map의 다형성
<script>
    console.log([1,2,3].map(a => a+1));

    console.log(map(el => el.nodeName, document.querySelectorAll('*')));

//    const it = document.querySelectorAll('*')[Symbol.iterator]();
//    console.log(it.next());
//    console.log(it.next());
//    console.log(it.next());
//    console.log(it.next());
//    console.log(it.next());
    function *gen() {
        yield 2;
        if (false) yield 3;
        yield 4;
    }  
    console.log(map(a => a * a, gen()));

    let m = new Map();
    m.set('a', 10);
    m.set('b', 20);
    console.log(new Map(map(([k,v]) => [k, v*2], m)));
    console.log(m);

    
    // 응용해보기
    let kvArray = [{key:1, value:10},
               {key:2, value:20},
               {key:3, value: 30}];

    let reformattedArray = kvArray.map(function(obj){
        let rObj = {};
        rObj[obj.key] = obj.value;
        return rObj;
    });
    console.log(reformattedArray)
    for (const k of kvArray) {
        console.log(k.key);
    }

//    var elems = document.querySelectorAll('select option:checked');
//    var values = [].map.call(elems, function(obj) {
//    return obj.value;
//    }); 
</script>